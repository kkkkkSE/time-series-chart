# Time Series Chart

![Sep-13-2023 22-48-10](https://github.com/kkkkkSE/auto-complete-search-bar/assets/95907436/6bf238a4-bd30-4fb4-a66d-67852e050a1d)

주어진 데이터를 기반으로 시계열 차트를 구현한 웹사이트 입니다.

배포 링크 : https://pre-onboarding-4-kkkkkse.vercel.app/

## 개발 Keyword

- Chart.js, react-chartjs-2 라이브러리를 사용하여 시계열 차트 구현
- 차트의 각종 Property, Option의 Callback 함수를 통하여 데이터 필터링

## 요구사항

- 하나의 차트 안에 Area, Bar 형태의 그래프가 존재하는 복합 그래프 생성
- Hover 시 Tooltip 출력
- Filter Button 클릭 시, Filter keyword를 ID로 갖고있는 데이터만 하이라이트
- 특정 차트 데이터 클릭 시, 동일한 ID를 가진 데이터 모두 하이라이트

## 설계 상세

### Chart.js 라이브러리 사용

차트 라이브러리를 선택하기 앞서 가장 중요하게 생각한 점은 아래와 같다.

- 요구사항에서 필요한 기능 포함
- 많은 개발자들이 사용하고, 검색 자료가 많아야 함
- React에서 사용하기 간편해야 함
- 최근에도 업데이트가 이루어지고 있으면 좋음

차트를 처음 구현하고, 단기간에 요구사항을 만족하기 위해선 위와 같은 사항에 해당하는 라이브러리를 사용해야 했다. 이를 바탕으로 채택된 라이브러리는 Chart.js이다.

- Chart.js는 과제의 요구사항에서 필요한 모든 기능을 제공하고 있다
- react-chartjs-2를 통해 차트를 React 컴포넌트로 제공하기 때문에 React에서 사용하기도 간편하다.
- npm에서 제공하는 Weekly Downloads 수가 약 300만에 가까울 정도로 사랑받고 있다.

이러한 이유로 Chart.js를 사용하게 됐다.

### 복합 그래프 생성

```js
<Chart type="bar" data={chartData} options={options} />
```

차트는 이러한 형태로 만들어진다. 보통 단일 그래프만 생성할 땐 그 그래프의 형태 이름으로 된 컴포넌트를 불러와서 사용하면 되지만, 복합 그래프를 구현하려면 `<Chart />`를 이용해야 한다.

데이터를 주입하는 것도 쉽다. 차트 컴포넌트의 속성에서 사용되는 `chartData`는 다음과 같은 형태를 띈다.

```js
const chartData = {
  labels,
  datasets: [ ... ],
}
```

`datasets` 배열의 요소로 차트의 데이터와 관련된 속성 값들이 포함되어 있는 `dataset` 객체가 들어가는데, 이를 2개 이상 넣어주면 복합 그래프가 된다.

`dataset` 객체 안에서 그래프의 타입이나, 데이터 간격, Scale 위치, 색상 등을 설정할 수 있다.

### Callback을 이용한 커스텀 옵션 주기

차트를 생성할 때 사용하는 많은 속성, 옵션 값들이 정적인 값 뿐만 아닌 Callback 함수도 받는다. 이것 또한 쉽게 사용할 수 있다.

```js
  datasets: [
      {
        type: 'line',
        // ...
        pointRadius: (ctx) => {
          // ctx를 이용한 콜백 함수 로직, return 값이 해당 속성에 할당된다.
        },
      },
      // ...
  ]
```

위 코드는 예시인데, 다른 속성들도 거의 동일한 형태로 사용된다. Parameter는 조금씩 다를 수 있는데, 대부분 차트 데이터와 관련된 값을 첫번째 인자로 제공한다. 나같은 경우는 index를 가장 많이 이용했고, index로 차트 리소스 데이터에 접근하여 데이터를 필터링 하는 데 이용했다.

## 어려웠던 점

### Chart.js 사용법

사람들이 많이 이용해서 레퍼런스가 많았던 것도 사실이지만, 차트와 관련된 속성, 옵션들이 많아 내가 원하는 기능을 구현하기 위해 찾는 시간이 매우 오래걸렸다.

특히나 내가 사용한 Chart.js의 버전은 4였는데, 버전이 바뀔 때마다 사용법이 많이 바뀌었고, 검색으로 특정 기능 사용법을 찾을 때 내 프로젝트 환경에서 적용이 되지 않는 것도 많았다.

정확한 정보를 찾을 순 없었지만 검색 + 챗 GPT를 이용하여 기능과 관련된 단어 등에서 힌트를 얻고, 최대한 공식문서에 의존했다.

### 관심사의 분리

차트 라이브러리를 다루는 점에 있어 미숙하여 차트와 관련된 코드를 한 컴포넌트 내에서만 다루게 됐다. 유지보수성을 높이기 위해 Class를 이용한 라이브러리 래핑이나 차트 데이터를 세팅하기 위한 코드를 유틸 폴더로 분리하는 등의 방법을 고려했으나, 그 안에서 사용되고 있는 Callback 함수가 UI와 긴밀하게 연결되어 있어 분리하는 것이 까다로웠다.

과제 기간이 지난 이후에도 해당 이슈에 대해 조금 더 고민해보고, 다른 사람의 코드를 참고하여 개선할 필요가 있을 것 같다.

## 실행 방법

아래 커맨드 순서대로 입력

```
git clone git@github.com:kkkkkSE/time-series-chart.git

cd time-series-chart

npm ci

npm start
```
